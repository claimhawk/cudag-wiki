# Dataset Viewer Project Overview

---

## 1. Overview

**Project Name**: `dataset-viewer`

**Purpose**: This is a Next.js-based web application designed to provide an interactive, navigable interface for exploring and viewing datasets — particularly those generated by AI or data annotation pipelines. It supports hierarchical navigation across datasets, generators, and individual records, with rich UI components for filtering, searching, and viewing data.

The application is built with a modular, component-driven architecture and leverages Next.js’s App Router for client-side routing and server components for data fetching and rendering. It is intended for use by data scientists, annotators, and researchers who need to inspect, navigate, and analyze large or complex datasets in a browser-based environment.

**Problem Solved**:
- Lack of intuitive, scalable UI for browsing hierarchical datasets.
- Inefficient or non-existent navigation between records, datasets, and generators.
- Absence of filtering, search, and metadata viewing capabilities in dataset exploration tools.
- Need for a consistent, reusable UI component library for data visualization and interaction.

---

## 2. Architecture

The project follows a **layered, component-based architecture** with clear separation of concerns:

### Directory Structure

```
src/
├── app/                  # Next.js App Router routes
│   ├── layout.tsx        # Root layout component
│   ├── page.tsx          # Home page
│   ├── [generator]/      # Dynamic route for generator selection
│   │   ├── page.tsx      # Generator landing page
│   │   ├── [dataset]/    # Dynamic route for dataset selection
│   │   │   ├── page.tsx  # Dataset landing page
│   │   │   ├── [index]/  # Dynamic route for record index
│   │   │   │   ├── record-viewer.tsx  # Record viewer component
│   │   │   │   ├── record-nav-url.tsx # Record navigation URL generator
│   │   │   │   └── page.tsx            # Record index page
│   │   └── ...
│   └── api/              # API routes for server-side data fetching
│       ├── navigate/route.ts
│       ├── records/route.ts
│       └── image/[...path]/route.ts
├── libs/                 # Reusable utility and configuration modules
│   ├── coordinates/resolution-units.lib.ts
│   ├── config/adapters-config.lib.ts
│   ├── paths/generators-path.lib.ts
│   └── ...
├── ui/                   # Reusable UI components (primitives + viewer components)
│   ├── viewer/           # Dataset viewer UI components
│   │   ├── components/
│   │   │   ├── task-type-filter.component.tsx
│   │   │   ├── image-viewer.component.tsx
│   │   │   ├── search-field.component.tsx
│   │   │   ├── dataset-selector.component.tsx
│   │   │   ├── record-details.component.tsx
│   │   │   └── record-nav.component.tsx
│   │   └── ...
│   └── primitives/       # Reusable UI primitives
│       ├── components/
│       │   ├── select.component.tsx
│       │   ├── button.component.tsx
│       │   ├── checkbox.component.tsx
│       │   └── input.component.tsx
├── next.config.ts        # Next.js configuration
├── package.json          # Project dependencies and scripts
├── tsconfig.json         # TypeScript configuration
└── CODE_QUALITY.md       # Code quality guidelines
```

### Key Architectural Patterns

- **App Router**: All routes are defined using dynamic segments (`[generator]`, `[dataset]`, `[index]`) to support hierarchical navigation.
- **Server Components**: Used for data-fetching logic in API routes and layout/page components.
- **Reusable UI Components**: Built with composition in mind, using `ui/primitives` and `ui/viewer` for consistent UI behavior.
- **Modular Configuration**: `libs/config/` and `libs/paths/` provide centralized configuration and path resolution logic.

---

## 3. Key Components

### UI Components

- **`src/ui/viewer/components/dataset-selector.component.tsx`**  
  Allows users to select a dataset from a list, triggering navigation to the dataset’s record index.

- **`src/ui/viewer/components/task-type-filter.component.tsx`**  
  Filters records by task type (e.g., classification, segmentation), used in record index pages.

- **`src/ui/viewer/components/image-viewer.component.tsx`**  
  Renders image data for records, likely supporting zoom, pan, or metadata overlays.

- **`src/ui/viewer/components/record-details.component.tsx`**  
  Displays metadata and annotations for a selected record, including labels, bounding boxes, or other structured data.

- **`src/ui/primitives/components/select.component.tsx`**  
  A reusable dropdown component used throughout the UI for selection inputs.

### Routing & Navigation

- **`src/app/[generator]/[dataset]/[index]/page.tsx`**  
  The main record index page for a given dataset and generator. Renders a list of records with navigation controls.

- **`src/app/[generator]/[dataset]/[index]/record-viewer.tsx`**  
  Renders a single record in detail, including its image, metadata, and annotations.

- **`src/app/api/records/route.ts`**  
  Server route to fetch record metadata and content for a given dataset and index.

- **`src/app/api/navigate/route.ts`**  
  Server route to handle navigation logic — e.g., redirecting to a record or dataset based on user input.

### Configuration & Utilities

- **`src/libs/config/adapters-config.lib.ts`**  
  Configures data adapters (e.g., for different data sources or formats) used by the viewer.

- **`src/libs/paths/generators-path.lib.ts`**  
  Provides utility functions to resolve and generate paths for generators and datasets.

- **`src/libs/coordinates/resolution-units.lib.ts`**  
  Handles coordinate resolution units (e.g., pixels, normalized coordinates) for annotation data.

---

## 4. Data Flow

The data flow is hierarchical and driven by route parameters and API calls:

1. **User Interaction** → `src/app/page.tsx` (Home) → User selects a generator → `src/app/[generator]/page.tsx`
2. **Generator Selection** → User selects a dataset → `src/app/[generator]/[dataset]/page.tsx`
3. **Dataset Selection** → User selects a record index → `src/app/[generator]/[dataset]/[index]/page.tsx`
4. **Record View** → User clicks a record → `src/app/[generator]/[dataset]/[index]/record-viewer.tsx`
5. **Data Fetching** → `src/app/api/records/route.ts` is called to fetch record metadata and content.
6. **UI Rendering** → Components like `record-details.component.tsx` and `image-viewer.component.tsx` render the data.
7. **Navigation** → `src/app/api/navigate/route.ts` handles redirects or URL updates for navigation.

**Data Sources**:
- API routes fetch data from backend services (likely REST or GraphQL).
- Configuration files (`adapters-config.lib.ts`) define how to interpret or transform data from different sources.
- Coordinate resolution utilities (`resolution-units.lib.ts`) normalize data for display.

---

## 5. Getting Started

### Prerequisites

- Node.js (v18+ recommended)
- npm, yarn, pnpm, or bun (any package manager)
- Basic knowledge of Next.js and TypeScript

### Setup

1. **Clone the repository** (if not already done).

2. **Install dependencies**:

```bash
npm install
# or
yarn install
# or
pnpm install
# or
bun install
```

3. **Start the development server**:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

4. **Open the application** in your browser at `http://localhost:3000`.

### First Steps

- The home page (`src/app/page.tsx`) will likely present a list of available generators.
- Clicking on a generator will navigate to `src/app/[generator]/page.tsx`, which may show available datasets.
- Selecting a dataset will navigate to `src/app/[generator]/[dataset]/page.tsx`, which will list records.
- Clicking a record will open `src/app/[generator]/[dataset]/[index]/record-viewer.tsx`, displaying its image and metadata.

### Development Tips

- Modify `src/app/page.tsx` to customize the home page.
- Add new generators or datasets by creating new route files under `src/app/[generator]/[dataset]/...`.
- Extend UI components in `src/ui/viewer/components/` or `src/ui/primitives/components/`.
- Add new API endpoints under `src/app/api/...`.

---

## Additional Notes

- The project uses **TypeScript** with strict configuration (`tsconfig.json`).
- **Next.js App Router** is used for routing — all pages are server components by default.
- **Custom UI components** are built with reusability and accessibility in mind.
- **API routes** are server-side and handle data fetching and navigation logic.

---

**Next Steps for Contributors**:
- Add new dataset types or generators by extending `adapters-config.lib.ts` and creating new route files.
- Improve UI components by enhancing `record-details.component.tsx` or `image-viewer.component.tsx`.
- Add unit tests for key components (e.g., `record-nav.component.tsx` or `dataset-selector.component.tsx`).
- Contribute to `CODE_QUALITY.md` to improve code standards.

--- 

This project is designed to be scalable and extensible — adding new datasets or generators is as simple as creating new route files and updating configuration modules.